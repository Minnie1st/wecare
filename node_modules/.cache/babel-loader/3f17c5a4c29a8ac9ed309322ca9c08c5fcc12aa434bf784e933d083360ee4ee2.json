{"ast":null,"code":"import React,{useState}from'react';import styled from'styled-components';import{useTranslation}from'react-i18next';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UploaderContainer=styled.div`\n  margin-bottom: 20px;\n`;const UploadLabel=styled.label`\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 500;\n`;const UploadArea=styled.div`\n  border: 2px dashed #ddd;\n  border-radius: 8px;\n  padding: 20px;\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  background-color: #f9f9f9;\n  \n  &:hover {\n    border-color: var(--primary-color);\n    background-color: #f0f0f0;\n  }\n`;const UploadInput=styled.input`\n  display: none;\n`;const UploadText=styled.p`\n  margin: 0;\n  color: var(--text-secondary);\n`;const ImagePreviewContainer=styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-top: 15px;\n`;const ImagePreview=styled.div`\n  position: relative;\n  width: 100px;\n  height: 100px;\n  border-radius: 4px;\n  overflow: hidden;\n`;const PreviewImage=styled.img`\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n`;const RemoveButton=styled.button`\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  background-color: rgba(0, 0, 0, 0.5);\n  color: white;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  font-size: 12px;\n  padding: 0;\n  line-height: 1;\n  \n  &:hover {\n    background-color: rgba(0, 0, 0, 0.7);\n  }\n`;function ImageUploader(_ref){let{onChange,maxImages=5,label,required=false}=_ref;const{t}=useTranslation();const[images,setImages]=useState([]);// 如果没有提供label，则使用默认的翻译\nconst imageLabel=label||t('imageUploader.uploadImage')+(required?' *':'');const handleImageChange=e=>{const files=Array.from(e.target.files);if(images.length+files.length>maxImages){alert(t('imageUploader.maxImagesError',{maxImages}));return;}const newImages=files.map(file=>({file,preview:URL.createObjectURL(file)}));const updatedImages=[...images,...newImages];setImages(updatedImages);if(onChange){onChange(updatedImages.map(img=>img.file));}};const removeImage=index=>{const updatedImages=[...images];URL.revokeObjectURL(updatedImages[index].preview);updatedImages.splice(index,1);setImages(updatedImages);if(onChange){onChange(updatedImages.map(img=>img.file));}};const handleAreaClick=()=>{document.getElementById('image-upload').click();};return/*#__PURE__*/_jsxs(UploaderContainer,{children:[/*#__PURE__*/_jsx(UploadLabel,{children:imageLabel}),/*#__PURE__*/_jsxs(UploadArea,{onClick:handleAreaClick,children:[/*#__PURE__*/_jsx(UploadInput,{type:\"file\",id:\"image-upload\",accept:\"image/*\",multiple:true,onChange:handleImageChange}),/*#__PURE__*/_jsx(UploadText,{children:t('imageUploader.uploadText',{maxImages})})]}),images.length>0&&/*#__PURE__*/_jsx(ImagePreviewContainer,{children:images.map((image,index)=>/*#__PURE__*/_jsxs(ImagePreview,{children:[/*#__PURE__*/_jsx(PreviewImage,{src:image.preview,alt:t('imageUploader.previewAlt',{index:index+1})}),/*#__PURE__*/_jsx(RemoveButton,{onClick:()=>removeImage(index),children:\"\\xD7\"})]},index))})]});}export default ImageUploader;","map":{"version":3,"names":["React","useState","styled","useTranslation","jsx","_jsx","jsxs","_jsxs","UploaderContainer","div","UploadLabel","label","UploadArea","UploadInput","input","UploadText","p","ImagePreviewContainer","ImagePreview","PreviewImage","img","RemoveButton","button","ImageUploader","_ref","onChange","maxImages","required","t","images","setImages","imageLabel","handleImageChange","e","files","Array","from","target","length","alert","newImages","map","file","preview","URL","createObjectURL","updatedImages","removeImage","index","revokeObjectURL","splice","handleAreaClick","document","getElementById","click","children","onClick","type","id","accept","multiple","image","src","alt"],"sources":["/Users/minnie/Desktop/wecare/src/components/ImageUploader.js"],"sourcesContent":["import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { useTranslation } from 'react-i18next';\n\nconst UploaderContainer = styled.div`\n  margin-bottom: 20px;\n`;\n\nconst UploadLabel = styled.label`\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 500;\n`;\n\nconst UploadArea = styled.div`\n  border: 2px dashed #ddd;\n  border-radius: 8px;\n  padding: 20px;\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  background-color: #f9f9f9;\n  \n  &:hover {\n    border-color: var(--primary-color);\n    background-color: #f0f0f0;\n  }\n`;\n\nconst UploadInput = styled.input`\n  display: none;\n`;\n\nconst UploadText = styled.p`\n  margin: 0;\n  color: var(--text-secondary);\n`;\n\nconst ImagePreviewContainer = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-top: 15px;\n`;\n\nconst ImagePreview = styled.div`\n  position: relative;\n  width: 100px;\n  height: 100px;\n  border-radius: 4px;\n  overflow: hidden;\n`;\n\nconst PreviewImage = styled.img`\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n`;\n\nconst RemoveButton = styled.button`\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  background-color: rgba(0, 0, 0, 0.5);\n  color: white;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  font-size: 12px;\n  padding: 0;\n  line-height: 1;\n  \n  &:hover {\n    background-color: rgba(0, 0, 0, 0.7);\n  }\n`;\n\nfunction ImageUploader({ onChange, maxImages = 5, label, required = false }) {\n  const { t } = useTranslation();\n  const [images, setImages] = useState([]);\n  \n  // 如果没有提供label，则使用默认的翻译\n  const imageLabel = label || t('imageUploader.uploadImage') + (required ? ' *' : '');\n  \n  const handleImageChange = (e) => {\n    const files = Array.from(e.target.files);\n    \n    if (images.length + files.length > maxImages) {\n      alert(t('imageUploader.maxImagesError', { maxImages }));\n      return;\n    }\n    \n    const newImages = files.map(file => ({\n      file,\n      preview: URL.createObjectURL(file)\n    }));\n    \n    const updatedImages = [...images, ...newImages];\n    setImages(updatedImages);\n    \n    if (onChange) {\n      onChange(updatedImages.map(img => img.file));\n    }\n  };\n  \n  const removeImage = (index) => {\n    const updatedImages = [...images];\n    URL.revokeObjectURL(updatedImages[index].preview);\n    updatedImages.splice(index, 1);\n    setImages(updatedImages);\n    \n    if (onChange) {\n      onChange(updatedImages.map(img => img.file));\n    }\n  };\n  \n  const handleAreaClick = () => {\n    document.getElementById('image-upload').click();\n  };\n  \n  return (\n    <UploaderContainer>\n      <UploadLabel>{imageLabel}</UploadLabel>\n      <UploadArea onClick={handleAreaClick}>\n        <UploadInput \n          type=\"file\" \n          id=\"image-upload\" \n          accept=\"image/*\" \n          multiple \n          onChange={handleImageChange} \n        />\n        <UploadText>{t('imageUploader.uploadText', { maxImages })}</UploadText>\n      </UploadArea>\n      \n      {images.length > 0 && (\n        <ImagePreviewContainer>\n          {images.map((image, index) => (\n            <ImagePreview key={index}>\n              <PreviewImage src={image.preview} alt={t('imageUploader.previewAlt', { index: index + 1 })} />\n              <RemoveButton onClick={() => removeImage(index)}>×</RemoveButton>\n            </ImagePreview>\n          ))}\n        </ImagePreviewContainer>\n      )}\n    </UploaderContainer>\n  );\n}\n\nexport default ImageUploader;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}